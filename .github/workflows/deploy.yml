name: Deploy to Hoststar SFTP

on:
  push:
    branches:
      - main

jobs:
  deploy:
    name: ðŸš€ Deploy to SFTP
    runs-on: ubuntu-latest
    
    steps:
    - name: ðŸ“¥ Checkout Code
      uses: actions/checkout@v3
    
    - name: ðŸš€ SFTP Deploy
      uses: shimataro/ssh-key-action@v2
      with:
        key: ${{ secrets.SSH_PRIVATE_KEY }}
        known_hosts: unnecessary
        if_key_exists: replace
        
    - name: ðŸ“¤ Upload via SFTP
      run: |
        sshpass -p "${{ secrets.FTP_PASSWORD }}" sftp -o StrictHostKeyChecking=no -P 5544 ${{ secrets.FTP_USERNAME }}@${{ secrets.FTP_SERVER }} << 'EOF'
        cd /langos.li/public_html
        put -r css
        put -r js
        put -r images
        put -r symbole
        put index.html
        put README.md
        EOF
